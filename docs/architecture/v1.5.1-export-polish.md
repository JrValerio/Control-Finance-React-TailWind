# Arquitetura v1.5.1 (Export CSV UX Polish)

## Objetivo

Melhorar a experiencia de exportacao CSV no frontend sem alterar regras de negocio ou contratos da API.

## Escopo

- Feedback de exportacao com toast de sucesso/erro
- Estado de loading mais claro no botao de exportacao
- Bloqueio de cliques repetidos durante exportacao
- Padronizacao de filename fallback em pt-BR quando a API nao retorna nome de arquivo

## Mudancas no Web (apps/web)

### App.jsx

- Novo estado de toast para exportacao (`exportToast`)
- Helpers para:
  - montar intervalo de datas do arquivo com base nos filtros ativos
  - gerar fallback filename em formato pt-BR:
    - `transacoes-todas-YYYY-MM-DD-a-YYYY-MM-DD.csv`
    - `transacoes-entrada-YYYY-MM-DD-a-YYYY-MM-DD.csv`
    - `transacoes-saida-YYYY-MM-DD-a-YYYY-MM-DD.csv`
- Botao `Exportar CSV` com:
  - loader visual (spinner)
  - `disabled` durante request
  - guarda anti-duplo clique
  - tooltip informativa

### Comportamento de erro

- Mantem `requestError` como fallback visual no painel principal
- Adiciona toast de erro para feedback imediato

## Testes

`apps/web/src/pages/App.test.jsx` cobre:

- export com filtros ativos + fallback filename pt-BR
- estado de loading e bloqueio de duplo clique
- toast de erro quando exportacao falha

## Resultado

v1.5.1 melhora usabilidade e previsibilidade do fluxo de export sem alterar API ou persistencia.
