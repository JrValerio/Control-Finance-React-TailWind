# Arquitetura v1.3.0 (Auth)

## Objetivo
Adicionar autenticacao JWT e protecao de rotas sem acoplar com persistencia definitiva.

## Backend (`apps/api`)

- `POST /auth/register`: cadastro em store temporario (memoria) com hash `bcrypt`.
- `POST /auth/login`: validacao de credenciais e emissao de JWT.
- `authMiddleware`: valida header `Authorization: Bearer <token>`.
- `GET|POST|DELETE /transactions`: protegidos por JWT (retornam `501` ate PR3).

## Frontend (`apps/web`)

- `AuthProvider`: estado de autenticacao e chamadas `login/register/logout`.
- `ProtectedRoute`: bloqueia acesso a `/app` sem token.
- `Login`: tela unica para login e criacao de conta.
- `api` service (Axios): injeta automaticamente o token em requests autenticadas.
- `401 handling`: resposta nao autorizada limpa sessao e executa logout global.

## Fluxo

```text
Login/Register (web)
  -> POST /auth/*
  -> token salvo no localStorage (`control_finance.auth_token`)
  -> acesso liberado a /app
  -> chamadas para /transactions enviam Authorization Bearer
```
